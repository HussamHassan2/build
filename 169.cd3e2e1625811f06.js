"use strict";(self.webpackChunkinsurance_portal=self.webpackChunkinsurance_portal||[]).push([[169],{7244:(_,v,n)=>{n.d(v,{K:()=>g});var l=n(6354),d=n(4438),e=n(6344);let g=(()=>{class h{constructor(t){this.api=t}listQuotations(t){const a=Array.isArray(t.domain)?JSON.stringify(t.domain):t.domain||"[]";return this.api.get("/v1/quote/list-quotations",{params:{user_id:t.user_id,user_type:t.user_type,limit:t.limit,offset:t.offset,domain:a}})}requestQuotation(t){return this.api.post("/v1/crm/request-quotation",{params:{data:t}}).pipe((0,l.T)(a=>a))}generateProposals(t){return this.api.post("/v1/crm/generate-opportunity-proposals",{params:{opportunity_id:t}}).pipe((0,l.T)(a=>a))}getProposals(t){return this.api.get(`/v1/crm/get-crm-proposals?opportunity_id=${t}`).pipe((0,l.T)(a=>a))}getVehicleMakers(){return this.api.get("/v1/lov/vehicle-makers").pipe((0,l.T)(t=>t))}getVehicleModels(t){return this.api.get(`/v1/lov/vehicle-models?maker_code=${encodeURIComponent(t)}`).pipe((0,l.T)(a=>a))}getVehicleModelCategories(t){return this.api.get(`/v1/lov/vehicle-model-categories?model_code=${encodeURIComponent(t)}`).pipe((0,l.T)(a=>a))}getVehicleModelYears(t){return this.api.get(`/v1/lov/vehicle-model-years?model_id=${encodeURIComponent(t)}`).pipe((0,l.T)(a=>a))}getVehicleBodyTypes(){return this.api.get("/v1/lov/vehicle-body-types").pipe((0,l.T)(t=>t))}getVehicleUsages(){return this.api.get("/v1/lov/vehicle-usages").pipe((0,l.T)(t=>t))}getVehicleCcs(){return this.api.get("/v1/lov/vehicle-ccs").pipe((0,l.T)(t=>t))}getVehicleFuelTypes(){return this.api.get("/v1/lov/vehicle-fuel-types").pipe((0,l.T)(t=>t))}getVehicleColors(){return this.api.get("/v1/lov/vehicle-colors").pipe((0,l.T)(t=>t))}getRoadSidePrograms(){return this.api.get("/v1/lov/road-side-programs").pipe((0,l.T)(t=>t))}getInsuranceIssuingTypes(){return this.api.get("/v1/lov/insurance-issuing-types").pipe((0,l.T)(t=>t))}downloadProposalPdf(t){return this.api.get(`/v1/crm/download-proposal-pdf?proposal_id=${t}`,{responseType:"blob"})}requestIssuance(t){return this.api.post("/v1/crm/request-issuance",{params:{data:t}}).pipe((0,l.T)(a=>a))}getCRMDocuments(){return this.api.get("/v1/lov/crm-documents").pipe((0,l.T)(t=>t))}getPaymentMethods(){return this.api.get("/v1/lov/payment-methods").pipe((0,l.T)(t=>t))}static{this.\u0275fac=function(a){return new(a||h)(d.KVO(e.G))}}static{this.\u0275prov=d.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},4169:(_,v,n)=>{n.r(v),n.d(v,{QuoteModule:()=>j});var l=n(177),d=n(9984),e=n(4438);const g=()=>["vehicle"],h=()=>({exact:!0}),b=()=>["driver"],t=()=>["coverage"];let a=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-quote-wizard"]],standalone:!0,features:[e.aNF],decls:29,vars:8,consts:[[1,"min-h-screen","bg-gray-50","py-12"],[1,"max-w-4xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"mb-8"],[1,"flex","items-center","justify-between"],[1,"flex-1"],[1,"relative"],["aria-hidden","true",1,"absolute","inset-0","flex","items-center"],[1,"w-full","border-t","border-gray-200"],[1,"relative","flex","justify-between"],[1,"group","flex","flex-col","items-center"],["routerLinkActive","border-primary bg-primary text-white",1,"border-gray-300","text-gray-500","hover:border-gray-400",3,"routerLink","routerLinkActiveOptions"],["data-lucide","car",1,"h-5","w-5"],[1,"mt-2","text-sm","font-medium","text-gray-900"],["routerLinkActive","border-primary bg-primary text-white",1,"border-gray-300","text-gray-500","hover:border-gray-400",3,"routerLink"],["data-lucide","user",1,"h-5","w-5"],[1,"mt-2","text-sm","font-medium","text-gray-500"],["data-lucide","shield",1,"h-5","w-5"],[1,"bg-white","shadow","rounded-lg","p-6"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),e.nrm(7,"div",7),e.k0s(),e.j41(8,"div",8)(9,"div",9)(10,"span",10)(11,"span",11),e.EFF(12,"\u{1f697}"),e.k0s()(),e.j41(13,"span",12),e.EFF(14,"Vehicle"),e.k0s()(),e.j41(15,"div",9)(16,"span",13)(17,"span",14),e.EFF(18,"\u{1f464}"),e.k0s()(),e.j41(19,"span",15),e.EFF(20,"Driver"),e.k0s()(),e.j41(21,"div",9)(22,"span",13)(23,"span",16),e.EFF(24,"\u{1f6e1}\ufe0f"),e.k0s()(),e.j41(25,"span",15),e.EFF(26,"Coverage"),e.k0s()()()()()()(),e.j41(27,"div",17),e.nrm(28,"router-outlet"),e.k0s()()()),2&i&&(e.R7$(10),e.Y8G("routerLink",e.lJ4(4,g))("routerLinkActiveOptions",e.lJ4(5,h)),e.R7$(6),e.Y8G("routerLink",e.lJ4(6,b)),e.R7$(6),e.Y8G("routerLink",e.lJ4(7,t)))},dependencies:[l.MD,d.iI,d.n3,d.Wk,d.wQ]})}}return s})();var c=n(9417),k=n(217),C=n(7244),F=n(2209);function M(s,E){if(1&s){const r=e.RV6();e.j41(0,"div")(1,"app-selection-modal",15),e.bIt("valueChange",function(o){let u;e.eBV(r);const m=e.XpG();return e.Njj(null==(u=m.vehicleForm.get("model_category_code"))?null:u.setValue(o))}),e.k0s()()}if(2&s){let r;const i=e.XpG();e.R7$(),e.Y8G("options",i.categories)("value",null==(r=i.vehicleForm.get("model_category_code"))?null:r.value)}}const x=[{path:"",component:a,children:[{path:"",redirectTo:"vehicle",pathMatch:"full"},{path:"vehicle",component:(()=>{class s{constructor(r,i,o){this.fb=r,this.quoteService=i,this.router=o,this.loading=!1,this.makers=[],this.models=[],this.categories=[],this.years=[],this.vehicleForm=this.fb.group({maker_code:["",c.k0.required],model_code:["",c.k0.required],model_category_code:[""],model_year_id:["",c.k0.required],vehicle_value:["",[c.k0.required,c.k0.min(0)]],vehicle_usage:[""],body_type:[""]})}ngOnInit(){this.loadMakers(),this.setupDependencyListeners()}loadMakers(){this.loading=!0,this.quoteService.getVehicleMakers().subscribe({next:r=>{console.log("API Response - Vehicle Makers:",r),this.makers=(r||[]).map(i=>{if(i.risk_image){let o=String(i.risk_image).trim();if(o.startsWith("data:")||o.startsWith("http")||o.startsWith("https"))i.risk_image=o;else if(o.startsWith("/")||o.startsWith("./")||o.startsWith("assets/"))i.risk_image=o;else if(/\.(png|jpg|jpeg|svg|gif|webp)(\?.*)?$/i.test(o))i.risk_image=o;else if(o.length>50){const u=o.replace(/\s/g,"");i.risk_image=`data:image/png;base64,${u}`}else i.risk_image=""}return i}),console.log("Processed Makers:",this.makers),this.loading=!1},error:r=>{console.error("Error loading makers",r),this.loading=!1}})}setupDependencyListeners(){this.vehicleForm.get("maker_code")?.valueChanges.subscribe(r=>{this.vehicleForm.patchValue({model_code:"",model_category_code:"",model_year_id:""}),this.models=[],this.categories=[],this.years=[],r&&this.loadModels(r)}),this.vehicleForm.get("model_code")?.valueChanges.subscribe(r=>{this.vehicleForm.patchValue({model_category_code:"",model_year_id:""}),this.categories=[],this.years=[],r&&this.loadCategories(r),r&&this.loadYears(r)})}loadModels(r){this.quoteService.getVehicleModels(r).subscribe(i=>this.models=i||[])}loadCategories(r){this.quoteService.getVehicleModelCategories(r).subscribe(i=>this.categories=i||[])}loadYears(r){const i=this.models.find(o=>o.code===r);i&&i.id?this.quoteService.getVehicleModelYears(i.id).subscribe(o=>this.years=o||[]):this.quoteService.getVehicleModelYears(r).subscribe(o=>this.years=o||[])}onSubmit(){this.vehicleForm.valid?(console.log("Vehicle Data:",this.vehicleForm.value),localStorage.setItem("quote_vehicle_details",JSON.stringify(this.vehicleForm.value)),this.router.navigate(["/quote/driver"])):this.vehicleForm.markAllAsTouched()}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(c.ok),e.rXU(C.K),e.rXU(d.Ix))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-motor-details"]],standalone:!0,features:[e.aNF],decls:24,vars:18,consts:[[1,"max-w-2xl","mx-auto"],[1,"text-2xl","font-semibold","text-gray-900","mb-6"],[1,"mt-1","text-sm","text-gray-500","dark:text-gray-400"],[1,"mt-6","space-y-6",3,"ngSubmit","formGroup"],["label","Vehicle Maker","title","Select Vehicle Maker","subtitle","Choose the manufacturer","placeholder","Select Maker","valueKey","code","displayKey","name","layout","grid",3,"valueChange","options","value","required","gridCols","imageKey"],["label","Vehicle Model","title","Select Vehicle Model","subtitle","Choose the model","placeholder","Select Model","valueKey","code","displayKey","name","layout","grid",3,"valueChange","options","value","required","disabled","gridCols"],[4,"ngIf"],["label","Model Year","title","Select Model Year","subtitle","Choose the year","placeholder","Select Year","valueKey","id","displayKey","year","layout","grid",3,"valueChange","options","value","required","disabled","gridCols"],["for","value",1,"block","text-sm","font-medium","text-gray-700"],[1,"mt-1","relative","rounded-md","shadow-sm"],[1,"pointer-events-none","absolute","inset-y-0","left-0","flex","items-center","pl-3"],[1,"text-gray-500","sm:text-sm"],["type","number","id","value","formControlName","vehicle_value","placeholder","0.00",1,"block","w-full","rounded-md","border-gray-300","pl-12","focus:border-primary","focus:ring-primary","sm:text-sm"],[1,"flex","justify-end","pt-5"],["type","submit",1,"ml-3","inline-flex","justify-center","rounded-md","border","border-transparent","bg-primary","py-2","px-4","text-sm","font-medium","text-white","shadow-sm","hover:bg-primary-dark","focus:outline-none","focus:ring-2","focus:ring-primary","focus:ring-offset-2","disabled:opacity-50",3,"disabled"],["label","Model Category","title","Select Category","subtitle","Choose the category","placeholder","Select Category","valueKey","code","displayKey","name",3,"valueChange","options","value"]],template:function(i,o){if(1&i&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2,"Vehicle Details"),e.k0s(),e.j41(3,"p",2),e.EFF(4,"Complete the details below to get your quote."),e.k0s(),e.j41(5,"form",3),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(6,"div")(7,"app-selection-modal",4),e.bIt("valueChange",function(m){let p;return null==(p=o.vehicleForm.get("maker_code"))?null:p.setValue(m)}),e.k0s()(),e.j41(8,"div")(9,"app-selection-modal",5),e.bIt("valueChange",function(m){let p;return null==(p=o.vehicleForm.get("model_code"))?null:p.setValue(m)}),e.k0s()(),e.DNE(10,M,2,2,"div",6),e.j41(11,"div")(12,"app-selection-modal",7),e.bIt("valueChange",function(m){let p;return null==(p=o.vehicleForm.get("model_year_id"))?null:p.setValue(m)}),e.k0s()(),e.j41(13,"div")(14,"label",8),e.EFF(15,"Vehicle Value (Sum Insured)"),e.k0s(),e.j41(16,"div",9)(17,"div",10)(18,"span",11),e.EFF(19,"SAR"),e.k0s()(),e.nrm(20,"input",12),e.k0s()(),e.j41(21,"div",13)(22,"button",14),e.EFF(23," Next: Driver Details "),e.k0s()()()()),2&i){let u,m,p,y,f;e.R7$(5),e.Y8G("formGroup",o.vehicleForm),e.R7$(2),e.Y8G("options",o.makers)("value",null==(u=o.vehicleForm.get("maker_code"))?null:u.value)("required",!0)("gridCols",4)("imageKey","risk_image"),e.R7$(2),e.Y8G("options",o.models)("value",null==(m=o.vehicleForm.get("model_code"))?null:m.value)("required",!0)("disabled",!(null!=(p=o.vehicleForm.get("maker_code"))&&p.value))("gridCols",4),e.R7$(),e.Y8G("ngIf",o.categories.length>0),e.R7$(2),e.Y8G("options",o.years)("value",null==(y=o.vehicleForm.get("model_year_id"))?null:y.value)("required",!0)("disabled",!(null!=(f=o.vehicleForm.get("model_code"))&&f.value))("gridCols",5),e.R7$(10),e.Y8G("disabled",o.vehicleForm.invalid||o.loading)}},dependencies:[l.MD,l.bT,c.X1,c.qT,c.me,c.Q0,c.BC,c.cb,c.j4,c.JD,k.G,F.j]})}}return s})()},{path:"driver",component:(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-driver-details"]],standalone:!0,features:[e.aNF],decls:10,vars:0,consts:[[1,"max-w-2xl","mx-auto"],[1,"text-2xl","font-semibold","text-gray-900","mb-6"],[1,"text-gray-600","mb-6"],[1,"flex","justify-between"],["routerLink","../vehicle",1,"text-primary","hover:text-primary-dark","font-medium"],["routerLink","../coverage",1,"bg-primary","text-white","px-4","py-2","rounded-md","hover:bg-primary-dark"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2,"Driver Details"),e.k0s(),e.j41(3,"p",2),e.EFF(4,"Driver details form to be implemented."),e.k0s(),e.j41(5,"div",3)(6,"button",4),e.EFF(7,"Back to Vehicle"),e.k0s(),e.j41(8,"button",5),e.EFF(9,"Next: Coverage"),e.k0s()()())},dependencies:[l.MD,d.iI,d.Wk]})}}return s})()},{path:"coverage",component:(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-coverage-selection"]],standalone:!0,features:[e.aNF],decls:2,vars:0,template:function(i,o){1&i&&(e.j41(0,"p"),e.EFF(1,"coverage-selection works!"),e.k0s())}})}}return s})()}]}];let D=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[d.iI.forChild(x),d.iI]})}}return s})(),j=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[l.MD,D]})}}return s})()}}]);