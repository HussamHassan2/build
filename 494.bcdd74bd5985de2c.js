"use strict";(self.webpackChunkinsurance_portal=self.webpackChunkinsurance_portal||[]).push([[494],{9494:(Ue,f,d)=>{d.r(f),d.d(f,{SurveyorModule:()=>ze});var l=d(177),p=d(9417),u=d(9984),e=d(4438),x=d(8010),y=d(3371),v=d(9989),k=d(9947);function w(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",19)(1,"div",20)(2,"div",21)(3,"h2",22),e.EFF(4,"Select Your Workspace"),e.k0s(),e.j41(5,"p",23),e.EFF(6,"Choose where you want to start today."),e.k0s()(),e.j41(7,"div",24)(8,"div",25),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.handleWizardSelect("issuance"))}),e.j41(9,"div",26),e.qSk(),e.j41(10,"svg",27),e.nrm(11,"path",12),e.k0s()(),e.joV(),e.j41(12,"h3",28),e.EFF(13," Issuance Survey"),e.k0s(),e.j41(14,"p",29),e.EFF(15,"Perform pre-risk inspections for new policies."),e.k0s(),e.j41(16,"div",30),e.EFF(17," Proceed "),e.qSk(),e.j41(18,"svg",31),e.nrm(19,"path",32),e.k0s()()(),e.joV(),e.j41(20,"div",25),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.handleWizardSelect("claim"))}),e.j41(21,"div",33),e.qSk(),e.j41(22,"svg",34),e.nrm(23,"path",35),e.k0s()(),e.joV(),e.j41(24,"h3",28),e.EFF(25," Claim Survey"),e.k0s(),e.j41(26,"p",29),e.EFF(27,"Assess damages and validate claims."),e.k0s(),e.j41(28,"div",30),e.EFF(29," Proceed "),e.qSk(),e.j41(30,"svg",31),e.nrm(31,"path",32),e.k0s()()()()()()}}let C=(()=>{class i{constructor(t,s,r,o){this.authService=t,this.route=s,this.router=r,this.surveyorService=o,this.user=null,this.showWizard=!1,this.stats={totalSurveys:62,pending:12,completed:45,urgent:2,inProgress:5}}ngOnInit(){this.authService.currentUser.subscribe(t=>{this.user=t}),this.route.queryParams.subscribe(t=>{"true"===t.wizard&&(this.showWizard=!0)}),this.wizardSubscription=this.surveyorService.openWizard$.subscribe(()=>{this.showWizard=!0})}ngOnDestroy(){this.wizardSubscription&&this.wizardSubscription.unsubscribe()}openWizard(){this.showWizard=!0}closeWizard(){this.showWizard=!1,this.router.navigate([],{relativeTo:this.route,queryParams:{wizard:null},queryParamsHandling:"merge"})}handleWizardSelect(t){this.showWizard=!1,this.router.navigate(["/dashboard/surveyor/stages"],{queryParams:{type:t}})}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(x.u),e.rXU(u.nX),e.rXU(u.Ix),e.rXU(y.L))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-surveyor-dashboard"]],decls:52,vars:6,consts:[["class","fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",4,"ngIf"],[1,"mb-8"],[1,"flex","justify-between","items-center"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white","mb-2"],[1,"text-gray-600","dark:text-gray-400"],[1,"hidden","md:flex","px-4","py-2","bg-white","dark:bg-gray-800","border","border-gray-200","dark:border-gray-700","rounded-lg","text-sm","font-medium","text-gray-600","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","shadow-sm","transition-colors",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6","mb-8"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-500","dark:text-gray-400"],[1,"text-3xl","font-bold","text-gray-900","dark:text-white","mt-2"],[1,"p-4","rounded-xl","bg-blue-500","text-white"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-7","w-7"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"],[1,"p-4","rounded-xl","bg-yellow-500","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"p-4","rounded-xl","bg-green-500","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"p-4","rounded-xl","bg-red-500","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","p-4","bg-black/60","backdrop-blur-sm"],[1,"relative","bg-white","dark:bg-gray-800","rounded-3xl","shadow-2xl","max-w-3xl","w-full","p-8","overflow-hidden","border","border-gray-100","dark:border-gray-700"],[1,"text-center","mb-8"],[1,"text-2xl","md:text-3xl","font-bold","text-gray-900","dark:text-white","mb-2"],[1,"text-gray-500","dark:text-gray-400"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"group","relative","overflow-hidden","bg-gray-50","dark:bg-gray-700/50","p-6","rounded-2xl","border","border-gray-200","dark:border-gray-600","hover:border-primary/50","dark:hover:border-primary/50","hover:shadow-lg","transition-all","duration-300","cursor-pointer","text-center","flex","flex-col","items-center","justify-center","h-full",3,"click"],[1,"p-4","rounded-full","bg-blue-100","dark:bg-gray-800","mb-4","group-hover:scale-110","transition-transform","duration-300"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-8","h-8","text-blue-600"],[1,"text-xl","font-bold","text-gray-900","dark:text-white","mb-2","group-hover:text-primary","transition-colors"],[1,"text-sm","text-gray-500","dark:text-gray-400","mb-4"],[1,"mt-auto","flex","items-center","text-primary","font-medium","text-sm","opacity-0","group-hover:opacity-100","transform","translate-y-2","group-hover:translate-y-0","transition-all","duration-300"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","ml-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M14 5l7 7m0 0l-7 7m7-7H3"],[1,"p-4","rounded-full","bg-red-100","dark:bg-gray-800","mb-4","group-hover:scale-110","transition-transform","duration-300"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-8","h-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"]],template:function(s,r){1&s&&(e.j41(0,"app-dashboard-layout"),e.DNE(1,w,32,0,"div",0),e.j41(2,"div",1)(3,"div",2)(4,"div")(5,"h1",3),e.EFF(6,"Surveyor Overview"),e.k0s(),e.j41(7,"p",4),e.EFF(8),e.k0s()(),e.j41(9,"button",5),e.bIt("click",function(){return r.openWizard()}),e.EFF(10," Open Quick Select "),e.k0s()()(),e.j41(11,"div",6)(12,"app-card")(13,"div",7)(14,"div")(15,"p",8),e.EFF(16,"Total Surveys"),e.k0s(),e.j41(17,"p",9),e.EFF(18),e.k0s()(),e.j41(19,"div",10),e.qSk(),e.j41(20,"svg",11),e.nrm(21,"path",12),e.k0s()()()(),e.joV(),e.j41(22,"app-card")(23,"div",7)(24,"div")(25,"p",8),e.EFF(26,"Pending"),e.k0s(),e.j41(27,"p",9),e.EFF(28),e.k0s()(),e.j41(29,"div",13),e.qSk(),e.j41(30,"svg",11),e.nrm(31,"path",14),e.k0s()()()(),e.joV(),e.j41(32,"app-card")(33,"div",7)(34,"div")(35,"p",8),e.EFF(36,"Completed"),e.k0s(),e.j41(37,"p",9),e.EFF(38),e.k0s()(),e.j41(39,"div",15),e.qSk(),e.j41(40,"svg",11),e.nrm(41,"path",16),e.k0s()()()(),e.joV(),e.j41(42,"app-card")(43,"div",7)(44,"div")(45,"p",8),e.EFF(46,"Urgent"),e.k0s(),e.j41(47,"p",9),e.EFF(48),e.k0s()(),e.j41(49,"div",17),e.qSk(),e.j41(50,"svg",11),e.nrm(51,"path",18),e.k0s()()()()()()),2&s&&(e.R7$(),e.Y8G("ngIf",r.showWizard),e.R7$(7),e.SpI("Welcome back, ",null==r.user?null:r.user.name,""),e.R7$(10),e.JRh(r.stats.totalSurveys),e.R7$(10),e.JRh(r.stats.pending),e.R7$(10),e.JRh(r.stats.completed),e.R7$(10),e.JRh(r.stats.urgent))},dependencies:[l.bT,v.w,k.i],encapsulation:2})}}return i})();var I=d(8359);class R extends I.yU{constructor(n,t){super()}schedule(n,t=0){return this}}const h={setInterval(i,n,...t){const{delegate:s}=h;return s?.setInterval?s.setInterval(i,n,...t):setInterval(i,n,...t)},clearInterval(i){const{delegate:n}=h;return(n?.clearInterval||clearInterval)(i)},delegate:void 0};var E=d(7908),$=d(6129);class m{constructor(n,t=m.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,s){return new this.schedulerActionCtor(this,n).schedule(s,t)}}m.now=$.U.now;const G=new class D extends m{constructor(n,t=m.now){super(n,t),this.actions=[],this._active=!1}flush(n){const{actions:t}=this;if(this._active)return void t.push(n);let s;this._active=!0;do{if(s=n.execute(n.state,n.delay))break}while(n=t.shift());if(this._active=!1,s){for(;n=t.shift();)n.unsubscribe();throw s}}}(class T extends R{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){var s;if(this.closed)return this;this.state=n;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(s=this.id)&&void 0!==s?s:this.requestAsyncId(o,this.id,t),this}requestAsyncId(n,t,s=0){return h.setInterval(n.flush.bind(n,this),s)}recycleAsyncId(n,t,s=0){if(null!=s&&this.delay===s&&!1===this.pending)return t;null!=t&&h.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(n,t);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let r,s=!1;try{this.work(n)}catch(o){s=!0,r=o||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:n,scheduler:t}=this,{actions:s}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,E.o)(s,this),null!=n&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}});var V=d(9974),N=d(4360),F=d(4901);function P(i,n){1&i&&(e.j41(0,"div",9),e.nrm(1,"div",10),e.k0s())}function A(i,n){if(1&i&&(e.j41(0,"div",46)(1,"span",47),e.EFF(2,"\u{1f4de}"),e.k0s(),e.EFF(3),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(3),e.SpI(" ",t.customer_phone," ")}}function X(i,n){if(1&i&&(e.j41(0,"div",48)(1,"span",49),e.EFF(2,"\u{1f4cd}"),e.k0s(),e.j41(3,"span",50),e.EFF(4),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(4),e.JRh(t.customer_street)}}function Y(i,n){if(1&i&&(e.j41(0,"div",51)(1,"div",52)(2,"div",53)(3,"span",54),e.EFF(4),e.k0s()(),e.j41(5,"div")(6,"p",55),e.EFF(7,"Chassis"),e.k0s(),e.j41(8,"p",56),e.EFF(9),e.k0s()(),e.j41(10,"div")(11,"p",55),e.EFF(12,"Motor"),e.k0s(),e.j41(13,"p",56),e.EFF(14),e.k0s()()()()),2&i){const t=e.XpG().$implicit;e.R7$(4),e.Lme("",t.risk_info.vehicle_make_name," ",t.risk_info.vehicle_model_name,""),e.R7$(5),e.SpI(" ",t.risk_info.vehicle_chassis_number||"N/A",""),e.R7$(5),e.SpI(" ",t.risk_info.vehicle_motor_number||"N/A","")}}function B(i,n){if(1&i&&(e.j41(0,"span",57),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" CRM: ",t.crm_risk_id," ")}}function L(i,n){if(1&i&&(e.j41(0,"span",58),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" Pol: ",t.policy_risk_id," ")}}function z(i,n){if(1&i&&(e.j41(0,"span",59),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" Clm: ",t.claim_id," ")}}function U(i,n){if(1&i&&(e.j41(0,"div",60)(1,"p",61),e.EFF(2,"Repair At"),e.k0s(),e.j41(3,"p",62),e.EFF(4),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(4),e.SpI(" ",t.repair_center_name||t.repair_center," ")}}function J(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",63)(1,"button",64),e.bIt("click",function(r){e.eBV(t);const o=e.XpG().$implicit,a=e.XpG(3);return e.Njj(a.onAccept(r,o))}),e.EFF(2," Accept "),e.k0s(),e.j41(3,"div",65)(4,"button",66),e.bIt("click",function(r){e.eBV(t);const o=e.XpG().$implicit,a=e.XpG(3);return e.Njj(a.onSuspend(r,o))}),e.EFF(5," Suspend "),e.k0s(),e.j41(6,"button",67),e.bIt("click",function(r){e.eBV(t);const o=e.XpG().$implicit,a=e.XpG(3);return e.Njj(a.onReject(r,o))}),e.EFF(7," Reject "),e.k0s()()()}}function O(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",22),e.bIt("click",function(){const r=e.eBV(t).$implicit,o=e.XpG(3);return e.Njj(o.onRowClick(r))}),e.j41(1,"div",23)(2,"div",24)(3,"div",25)(4,"span",26),e.EFF(5),e.k0s(),e.j41(6,"span",27),e.EFF(7),e.nI1(8,"date"),e.k0s()(),e.j41(9,"h4",28),e.EFF(10),e.k0s(),e.j41(11,"p",29),e.EFF(12),e.k0s(),e.j41(13,"div",30),e.DNE(14,A,4,1,"div",31)(15,X,5,1,"div",32),e.k0s()(),e.j41(16,"div",33)(17,"p",34),e.EFF(18," Vehicle & Risk"),e.k0s(),e.DNE(19,Y,15,4,"div",35),e.j41(20,"div",36),e.DNE(21,B,2,1,"span",37)(22,L,2,1,"span",38)(23,z,2,1,"span",39),e.k0s()(),e.j41(24,"div",40)(25,"div")(26,"div",41),e.nrm(27,"div",42),e.j41(28,"div",43),e.bIt("click",function(r){const o=e.eBV(t).$implicit;return e.XpG(3).onRowClick(o),e.Njj(r.stopPropagation())}),e.EFF(29," Details "),e.j41(30,"span"),e.EFF(31,"\u2192"),e.k0s()()(),e.DNE(32,U,5,1,"div",44),e.k0s(),e.DNE(33,J,8,0,"div",45),e.k0s()()()}if(2&i){const t=n.$implicit,s=e.XpG().$implicit,r=e.XpG(2);e.R7$(5),e.SpI(" ",t.survey_number," "),e.R7$(2),e.SpI(" ",e.i5U(8,14,t.assigned_date,"mediumDate")," "),e.R7$(2),e.FS9("title",t.customer_name),e.R7$(),e.SpI(" ",t.customer_name," "),e.R7$(2),e.SpI(" ",t.survey_type," Inspection "),e.R7$(2),e.Y8G("ngIf",t.customer_phone),e.R7$(),e.Y8G("ngIf",t.customer_street),e.R7$(4),e.Y8G("ngIf",t.risk_info),e.R7$(2),e.Y8G("ngIf",t.crm_risk_id),e.R7$(),e.Y8G("ngIf",t.policy_risk_id),e.R7$(),e.Y8G("ngIf",t.claim_id),e.R7$(4),e.Y8G("innerHTML",r.getPriorityBadge(t.priority),e.npT),e.R7$(5),e.Y8G("ngIf",("Claim"===t.survey_type||"claim"===t.survey_type||t.claim_id)&&(t.repair_center_name||t.repair_center)),e.R7$(),e.Y8G("ngIf","pending"===s.id)}}function H(i,n){1&i&&(e.j41(0,"div",68)(1,"p",69),e.EFF(2,"No surveys"),e.k0s()())}function W(i,n){if(1&i&&(e.j41(0,"div",14)(1,"div",15)(2,"div",16),e.nrm(3,"span"),e.j41(4,"h3",17),e.EFF(5),e.k0s()(),e.j41(6,"span",18),e.EFF(7),e.k0s()(),e.j41(8,"div",19),e.DNE(9,O,34,17,"div",20)(10,H,3,0,"div",21),e.k0s()()),2&i){const t=n.$implicit;e.R7$(3),e.HbH("w-3 h-3 rounded-full bg-"+t.color+"-500"),e.R7$(2),e.JRh(t.title),e.R7$(2),e.SpI(" ",t.items.length," "),e.R7$(2),e.Y8G("ngForOf",t.items),e.R7$(),e.Y8G("ngIf",0===t.items.length)}}function q(i,n){if(1&i&&(e.j41(0,"div",11)(1,"div",12),e.DNE(2,W,11,6,"div",13),e.k0s()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("ngForOf",t.boardColumns)}}function Q(i,n){if(1&i){const t=e.RV6();e.j41(0,"div")(1,"app-data-table",70),e.bIt("rowClick",function(r){e.eBV(t);const o=e.XpG();return e.Njj(o.onRowClick(r))})("exportData",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.onExport())}),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(),e.Y8G("config",t.tableConfig)}}let _=(()=>{class i{constructor(t,s,r){this.surveyorService=t,this.router=s,this.route=r,this.viewMode="board",this.currentType="all",this.statusFilter=null,this.tableConfig={columns:[],data:[],loading:!0,pageSize:10,showSearch:!0,showExport:!0,searchPlaceholder:"Search surveys..."},this.ALL_BOARD_COLUMNS=[{id:"pending",title:"Pending",color:"yellow",items:[],states:["pending","surveyor","reassign","new","surveyor assigned"]},{id:"in_progress",title:"In Progress",color:"blue",items:[],states:["in_progress","surveying"]},{id:"suspended",title:"Suspended",color:"red",items:[],states:["suspended"]},{id:"completed",title:"Completed",color:"green",items:[],states:["completed","submitted","accepted","rejected","report_rejected"]}],this.boardColumns=[...this.ALL_BOARD_COLUMNS],this.setupColumns()}ngOnInit(){const t=this.route.snapshot.url[0]?.path;this.route.queryParams.pipe(function M(i,n=G){return(0,V.N)((t,s)=>{let r=null,o=null,a=null;const g=()=>{if(r){r.unsubscribe(),r=null;const c=o;o=null,s.next(c)}};function b(){const c=a+i,S=n.now();if(S<c)return r=this.schedule(void 0,c-S),void s.add(r);g()}t.subscribe((0,N._)(s,c=>{o=c,a=n.now(),r||(r=n.schedule(b,i),s.add(r))},()=>{g(),s.complete()},void 0,()=>{o=r=null}))})}(50)).subscribe(s=>{s.view&&(this.viewMode=s.view),s.type&&(this.currentType=s.type),this.statusFilter=null,"suspended"===t?(this.statusFilter="suspended",this.boardColumns=[this.ALL_BOARD_COLUMNS.find(r=>"suspended"===r.id)]):"pending"===t?(this.statusFilter="pending",this.boardColumns=[this.ALL_BOARD_COLUMNS.find(r=>"pending"===r.id)]):"in-progress"===t?(this.statusFilter="in_progress",this.boardColumns=[this.ALL_BOARD_COLUMNS.find(r=>"in_progress"===r.id)]):s.status?this.statusFilter=s.status:this.boardColumns=[this.ALL_BOARD_COLUMNS.find(r=>"pending"===r.id)],this.loadPendingSurveys()})}setupColumns(){this.tableConfig.columns=[{key:"survey_number",label:"Survey #",sortable:!0},{key:"claim_number",label:"Claim #",sortable:!0},{key:"customer_name",label:"Customer",sortable:!0},{key:"survey_type",label:"Type",sortable:!0},{key:"assigned_date",label:"Assigned",sortable:!0},{key:"priority",label:"Priority",sortable:!0,render:t=>this.getPriorityBadge(t.priority)},{key:"status",label:"Status",sortable:!0,render:t=>this.getStatusBadge(t.status)}]}loadPendingSurveys(){this.tableConfig.loading=!0;const t={limit:100,offset:0};"all"!==this.currentType&&(t.survey_type=this.currentType),this.statusFilter?"suspended"===this.statusFilter?t.domain=JSON.stringify([["state","=","suspended"]]):"pending"===this.statusFilter?t.domain=JSON.stringify([["state","=","surveyor"]]):"in_progress"===this.statusFilter&&(t.domain=JSON.stringify([["state","in",["surveying","in_progress"]]])):"board"!==this.viewMode&&(t.domain=JSON.stringify([["state","=","surveyor"]])),this.surveyorService.listSurveys(t).subscribe({next:s=>{let r=[];s.surveys?r=s.surveys:s.data&&s.data.surveys?r=s.data.surveys:s.data&&s.data.result&&s.data.result.data?r=s.data.result.data:s.data&&s.data.data?r=s.data.data:s.data&&Array.isArray(s.data)?r=s.data:Array.isArray(s)&&(r=s);const o=r.map(a=>({...a,assigned_date:a.assign_date,status:a.state||a.status,priority:a.priority||"Medium",claim_number:a.claim_number||(a.claim_id?a.claim_id:"N/A")}));this.tableConfig.data=o,"board"===this.viewMode&&this.organizeBoardData(o),this.tableConfig.loading=!1},error:s=>{console.error("Error loading surveys:",s),this.tableConfig.loading=!1}})}organizeBoardData(t){this.boardColumns.forEach(s=>s.items=[]),t.forEach(s=>{const r=(s.state||s.status||"pending").toLowerCase(),o=this.boardColumns.find(a=>a.states&&a.states.includes(r));o&&o.items.push(s)})}getPriorityBadge(t){return{high:"\u{1f534} High",medium:"\u{1f7e1} Medium",low:"\u{1f7e2} Low"}[t?.toLowerCase()]||t}getStatusBadge(t){return{pending:"\u{1f7e1} Pending",surveyor:"\u{1f7e1} Pending",suspended:"\u{1f534} Suspended",in_progress:"\u{1f535} In Progress",completed:"\u{1f7e2} Completed"}[t?.toLowerCase()]||t}onRowClick(t){this.router.navigate(["/dashboard/surveyor/surveys",t.id])}onExport(){console.log("Exporting surveys...")}toggleView(t){this.viewMode=t,this.loadPendingSurveys()}onAccept(t,s){t.stopPropagation(),this.surveyorService.acceptSurvey(s.id).subscribe({next:()=>{this.loadPendingSurveys()},error:r=>console.error("Error accepting survey:",r)})}onSuspend(t,s){t.stopPropagation(),this.surveyorService.suspendSurvey(s.id).subscribe({next:()=>{this.loadPendingSurveys()},error:r=>console.error("Error suspending survey:",r)})}onReject(t,s){t.stopPropagation(),this.surveyorService.rejectSurvey(s.id).subscribe({next:()=>{this.loadPendingSurveys()},error:r=>console.error("Error rejecting survey:",r)})}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(y.L),e.rXU(u.Ix),e.rXU(u.nX))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-surveyor-pending"]],decls:17,vars:30,consts:[[1,"space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"text-gray-600","dark:text-gray-400","mt-1"],[1,"flex","bg-gray-100","dark:bg-gray-700","p-1","rounded-lg"],[1,"px-4","py-2","rounded-md","text-sm","font-medium","transition-all","duration-200",3,"click"],["class","flex justify-center items-center h-64",4,"ngIf"],["class","overflow-x-auto pb-4",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center","items-center","h-64"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-primary"],[1,"overflow-x-auto","pb-4"],[1,"flex","gap-6","min-w-[1000px]"],["class","flex-1 min-w-[300px]",4,"ngFor","ngForOf"],[1,"flex-1","min-w-[300px]"],[1,"flex","items-center","justify-between","mb-4","p-2","bg-gray-50","dark:bg-gray-800","rounded-lg"],[1,"flex","items-center","gap-2"],[1,"font-semibold","text-gray-900","dark:text-white"],[1,"bg-gray-200","dark:bg-gray-700","text-gray-700","dark:text-gray-300","px-2","py-0.5","rounded","text-xs"],[1,"space-y-4"],["class","bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 hover:shadow-lg hover:border-primary/50 cursor-pointer transition-all duration-200 group",3,"click",4,"ngFor","ngForOf"],["class","text-center py-8 border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-xl",4,"ngIf"],[1,"bg-white","dark:bg-gray-800","p-4","rounded-xl","border","border-gray-200","dark:border-gray-700","hover:shadow-lg","hover:border-primary/50","cursor-pointer","transition-all","duration-200","group",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-12","gap-4"],[1,"md:col-span-4","border-b","md:border-b-0","md:border-r","border-gray-100","dark:border-gray-700","pb-3","md:pb-0","md:pr-3"],[1,"flex","justify-between","items-start","mb-2"],[1,"px-2","py-0.5","bg-gray-100","dark:bg-gray-700","text-[10px]","font-mono","font-medium","rounded","text-gray-600","dark:text-gray-300"],[1,"text-[10px]","text-gray-400","dark:text-gray-500"],[1,"font-bold","text-gray-900","dark:text-white","text-sm","mb-0.5","group-hover:text-primary","transition-colors","line-clamp-2",3,"title"],[1,"text-[10px]","font-medium","text-primary/80","dark:text-primary/70","uppercase","tracking-wide","mb-3"],[1,"space-y-1.5"],["class","flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",4,"ngIf"],["class","flex items-start gap-2 text-xs text-gray-500 dark:text-gray-400",4,"ngIf"],[1,"md:col-span-5","border-b","md:border-b-0","md:border-r","border-gray-100","dark:border-gray-700","pb-3","md:pb-0","md:px-3"],[1,"text-[10px]","font-semibold","text-gray-400","dark:text-gray-500","uppercase","mb-2"],["class","bg-gray-50/50 dark:bg-gray-700/20 rounded-lg p-2.5 mb-3 border border-gray-100 dark:border-gray-700/50",4,"ngIf"],[1,"flex","flex-wrap","gap-1.5"],["class","px-1.5 py-0.5 rounded text-[10px] font-medium bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 border border-blue-100 dark:border-blue-800",4,"ngIf"],["class","px-1.5 py-0.5 rounded text-[10px] font-medium bg-purple-50 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300 border border-purple-100 dark:border-purple-800",4,"ngIf"],["class","px-1.5 py-0.5 rounded text-[10px] font-medium bg-amber-50 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300 border border-amber-100 dark:border-amber-800",4,"ngIf"],[1,"md:col-span-3","flex","flex-col","justify-between"],[1,"flex","justify-between","items-center","mb-2"],[1,"text-xs","scale-90","origin-left",3,"innerHTML"],[1,"text-[10px]","font-medium","text-primary","hover:underline","flex","items-center","gap-0.5","cursor-pointer",3,"click"],["class","mb-3 p-1.5 bg-red-50 dark:bg-red-900/10 rounded border border-red-100 dark:border-red-800/30 text-center",4,"ngIf"],["class","flex flex-col gap-1.5 mt-auto",4,"ngIf"],[1,"flex","items-center","gap-2","text-xs","text-gray-500","dark:text-gray-400"],[1,"w-4","h-4","flex","items-center","justify-center","bg-gray-50","dark:bg-gray-700","rounded-full","text-[10px]"],[1,"flex","items-start","gap-2","text-xs","text-gray-500","dark:text-gray-400"],[1,"w-4","h-4","flex-shrink-0","flex","items-center","justify-center","bg-gray-50","dark:bg-gray-700","rounded-full","text-[10px]","mt-0.5"],[1,"line-clamp-2","leading-tight"],[1,"bg-gray-50/50","dark:bg-gray-700/20","rounded-lg","p-2.5","mb-3","border","border-gray-100","dark:border-gray-700/50"],[1,"grid","grid-cols-2","gap-2","text-xs"],[1,"col-span-2"],[1,"text-gray-900","dark:text-gray-100","font-medium"],[1,"text-[10px]","text-gray-400"],[1,"font-mono","text-[11px]","text-gray-600","dark:text-gray-400","truncate"],[1,"px-1.5","py-0.5","rounded","text-[10px]","font-medium","bg-blue-50","text-blue-700","dark:bg-blue-900/30","dark:text-blue-300","border","border-blue-100","dark:border-blue-800"],[1,"px-1.5","py-0.5","rounded","text-[10px]","font-medium","bg-purple-50","text-purple-700","dark:bg-purple-900/30","dark:text-purple-300","border","border-purple-100","dark:border-purple-800"],[1,"px-1.5","py-0.5","rounded","text-[10px]","font-medium","bg-amber-50","text-amber-700","dark:bg-amber-900/30","dark:text-amber-300","border","border-amber-100","dark:border-amber-800"],[1,"mb-3","p-1.5","bg-red-50","dark:bg-red-900/10","rounded","border","border-red-100","dark:border-red-800/30","text-center"],[1,"text-[9px]","text-red-500","uppercase","font-bold"],[1,"text-[10px]","font-semibold","text-gray-800","dark:text-gray-200","line-clamp-1"],[1,"flex","flex-col","gap-1.5","mt-auto"],[1,"w-full","py-1","bg-green-50","text-green-700","hover:bg-green-100","border","border-green-200","rounded","text-xs","font-semibold","transition-all","dark:bg-green-900/20","dark:text-green-400","dark:border-green-800",3,"click"],[1,"flex","gap-1.5"],[1,"flex-1","py-1","bg-yellow-50","text-yellow-700","hover:bg-yellow-100","border","border-yellow-200","rounded","text-xs","font-semibold","transition-all","dark:bg-yellow-900/20","dark:text-yellow-400","dark:border-yellow-800",3,"click"],[1,"flex-1","py-1","bg-red-50","text-red-700","hover:bg-red-100","border","border-red-200","rounded","text-xs","font-semibold","transition-all","dark:bg-red-900/20","dark:text-red-400","dark:border-red-800",3,"click"],[1,"text-center","py-8","border-2","border-dashed","border-gray-200","dark:border-gray-700","rounded-xl"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[3,"rowClick","exportData","config"]],template:function(s,r){1&s&&(e.j41(0,"app-dashboard-layout")(1,"div",0)(2,"div",1)(3,"div")(4,"h1",2),e.EFF(5),e.nI1(6,"titlecase"),e.k0s(),e.j41(7,"p",3),e.EFF(8,"Review and complete assigned surveys"),e.k0s()(),e.j41(9,"div",4)(10,"button",5),e.bIt("click",function(){return r.toggleView("board")}),e.EFF(11," Board "),e.k0s(),e.j41(12,"button",5),e.bIt("click",function(){return r.toggleView("table")}),e.EFF(13," List "),e.k0s()()(),e.DNE(14,P,2,0,"div",6)(15,q,3,1,"div",7)(16,Q,2,1,"div",8),e.k0s()()),2&s&&(e.R7$(5),e.SpI(" ","all"===r.currentType?"Pending Surveys":e.bMT(6,28,r.currentType)+" Surveys"," "),e.R7$(5),e.AVh("bg-white","board"===r.viewMode)("dark:bg-gray-600","board"===r.viewMode)("shadow-sm","board"===r.viewMode)("text-gray-900","board"===r.viewMode)("dark:text-white","board"===r.viewMode)("text-gray-500","board"!==r.viewMode),e.R7$(2),e.AVh("bg-white","table"===r.viewMode)("dark:bg-gray-600","table"===r.viewMode)("shadow-sm","table"===r.viewMode)("text-gray-900","table"===r.viewMode)("dark:text-white","table"===r.viewMode)("text-gray-500","table"!==r.viewMode),e.R7$(2),e.Y8G("ngIf",r.tableConfig.loading),e.R7$(),e.Y8G("ngIf",!r.tableConfig.loading&&"board"===r.viewMode),e.R7$(),e.Y8G("ngIf",!r.tableConfig.loading&&"table"===r.viewMode))},dependencies:[l.Sq,l.bT,v.w,F.u,l.PV,l.vh]})}}return i})();var K=d(5567),Z=d(8219),ee=d(4333),te=d(4317),re=d(2209),ie=d(9999);const se=(i,n,t,s)=>({"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":i,"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":n,"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":t,"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":s}),ne=()=>({value:"excellent",label:"Excellent"}),oe=()=>({value:"good",label:"Good"}),ae=()=>({value:"fair",label:"Fair"}),de=()=>({value:"poor",label:"Poor"}),le=(i,n,t,s)=>[i,n,t,s];function ue(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-button",50),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.onReject())}),e.EFF(1,"Reject"),e.k0s()}}function ce(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-button",51),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.onSuspend())}),e.EFF(1,"Suspend"),e.k0s()}}function pe(i,n){if(1&i){const t=e.RV6();e.j41(0,"app-button",52),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.onAccept())}),e.EFF(1,"Accept"),e.k0s()}}function ge(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",17)(1,"div",18),e.nrm(2,"div",19),e.j41(3,"div",20)(4,"div",21)(5,"button",22),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.goBack())}),e.EFF(6,"Surveys"),e.k0s(),e.qSk(),e.j41(7,"svg",23),e.nrm(8,"path",24),e.k0s(),e.joV(),e.j41(9,"span",25),e.EFF(10),e.k0s()(),e.j41(11,"div",26)(12,"div",27)(13,"div",28),e.qSk(),e.j41(14,"svg",29),e.nrm(15,"path",5)(16,"polyline",6)(17,"path",30)(18,"path",31)(19,"path",32),e.k0s()(),e.joV(),e.j41(20,"div")(21,"h1",33),e.EFF(22),e.k0s(),e.j41(23,"p",34),e.EFF(24),e.k0s(),e.j41(25,"div",35)(26,"span",36),e.EFF(27),e.k0s(),e.j41(28,"span",37),e.qSk(),e.j41(29,"svg",38),e.nrm(30,"rect",39)(31,"path",40),e.k0s(),e.EFF(32),e.k0s(),e.joV(),e.j41(33,"span",37),e.qSk(),e.j41(34,"svg",38),e.nrm(35,"rect",41)(36,"line",42)(37,"line",43)(38,"line",44),e.k0s(),e.EFF(39),e.nI1(40,"date"),e.k0s()()()(),e.joV(),e.j41(41,"div",45)(42,"span",46),e.EFF(43),e.k0s(),e.DNE(44,ue,2,0,"app-button",47)(45,ce,2,0,"app-button",48)(46,pe,2,0,"app-button",49),e.k0s()()()()()}if(2&i){const t=e.XpG();e.R7$(10),e.JRh(t.survey.survey_number),e.R7$(12),e.SpI("",t.survey.surveyor_name," "),e.R7$(2),e.SpI("Survey #",t.survey.survey_number,""),e.R7$(3),e.SpI(" ",t.survey.survey_type," "),e.R7$(5),e.SpI(" ",t.survey.product_name," "),e.R7$(7),e.SpI(" Due: ",e.i5U(40,11,t.survey.due_date,"mediumDate")," "),e.R7$(3),e.Y8G("ngClass",e.ziG(14,se,"pending"===t.survey.state||"surveyor assigned"===t.survey.state,"in_progress"===t.survey.state,"completed"===t.survey.state||"accepted"===t.survey.state,"rejected"===t.survey.state||"suspended"===t.survey.state)),e.R7$(),e.SpI(" ",t.survey.state," "),e.R7$(),e.Y8G("ngIf","surveyor assigned"===t.survey.state),e.R7$(),e.Y8G("ngIf","surveyor assigned"===t.survey.state),e.R7$(),e.Y8G("ngIf","surveyor assigned"===t.survey.state)}}function ve(i,n){1&i&&e.nrm(0,"div",53)}function me(i,n){1&i&&e.nrm(0,"div",53)}function ye(i,n){1&i&&e.nrm(0,"div",53)}function he(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",3),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.setActiveTab("documents"))}),e.qSk(),e.j41(1,"svg",4),e.nrm(2,"path",54)(3,"polyline",6),e.k0s(),e.EFF(4," Documents "),e.DNE(5,ye,1,0,"div",7),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("ngClass","documents"===t.activeTab?"text-primary":"text-gray-500 dark:text-gray-400 hover:text-gray-700"),e.R7$(5),e.Y8G("ngIf","documents"===t.activeTab)}}function be(i,n){1&i&&e.nrm(0,"div",53)}function _e(i,n){if(1&i){const t=e.RV6();e.j41(0,"button",3),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.setActiveTab("actions"))}),e.qSk(),e.j41(1,"svg",4),e.nrm(2,"path",55)(3,"path",56),e.k0s(),e.EFF(4," Assessment "),e.DNE(5,be,1,0,"div",7),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("ngClass","actions"===t.activeTab?"text-primary":"text-gray-500 dark:text-gray-400 hover:text-gray-700"),e.R7$(5),e.Y8G("ngIf","actions"===t.activeTab)}}function fe(i,n){if(1&i&&(e.j41(0,"div")(1,"h4",77),e.EFF(2,"Conclusion "),e.k0s(),e.j41(3,"p",78),e.EFF(4),e.k0s()()),2&i){const t=e.XpG(3);e.R7$(4),e.SpI(" ",t.survey.conclusion,"")}}function xe(i,n){if(1&i&&(e.j41(0,"div")(1,"h4",77),e.EFF(2," Recommendation "),e.k0s(),e.j41(3,"p",78),e.EFF(4),e.k0s()()),2&i){const t=e.XpG(3);e.R7$(4),e.SpI(" ",t.survey.recommendation,"")}}function ke(i,n){if(1&i&&(e.j41(0,"app-card",75)(1,"div",60),e.DNE(2,fe,5,1,"div",76)(3,xe,5,1,"div",76),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(2),e.Y8G("ngIf",t.survey.conclusion),e.R7$(),e.Y8G("ngIf",t.survey.recommendation)}}function Fe(i,n){if(1&i&&(e.j41(0,"div",57)(1,"div",58)(2,"app-card",59)(3,"div",60)(4,"div",61)(5,"div")(6,"p",62),e.EFF(7,"Survey Number"),e.k0s(),e.j41(8,"p",63),e.EFF(9),e.k0s()(),e.j41(10,"div")(11,"p",62),e.EFF(12,"Sequence"),e.k0s(),e.j41(13,"p",63),e.EFF(14),e.k0s()()(),e.nrm(15,"div",64),e.j41(16,"div")(17,"p",62),e.EFF(18,"Assign Date"),e.k0s(),e.j41(19,"p",63),e.EFF(20),e.nI1(21,"date"),e.k0s()(),e.j41(22,"div")(23,"p",62),e.EFF(24,"Due Date"),e.k0s(),e.j41(25,"p",63),e.EFF(26),e.nI1(27,"date"),e.k0s()()()(),e.j41(28,"app-card",65)(29,"div",60)(30,"div")(31,"p",62),e.EFF(32,"Name"),e.k0s(),e.j41(33,"p",63),e.EFF(34),e.k0s()(),e.j41(35,"div")(36,"p",62),e.EFF(37,"Contact"),e.k0s(),e.j41(38,"p",66),e.EFF(39),e.k0s(),e.j41(40,"p",67),e.EFF(41),e.k0s()(),e.j41(42,"div")(43,"p",62),e.EFF(44,"Location"),e.k0s(),e.j41(45,"p",68),e.EFF(46),e.k0s()()()(),e.j41(47,"app-card",69)(48,"div",60)(49,"div",70)(50,"p",71),e.EFF(51,"Zero Price"),e.k0s(),e.j41(52,"p",72),e.EFF(53),e.nI1(54,"currency"),e.k0s()(),e.j41(55,"div",70)(56,"p",71),e.EFF(57,"Market Value"),e.k0s(),e.j41(58,"p",72),e.EFF(59),e.nI1(60,"currency"),e.k0s()(),e.j41(61,"div",70)(62,"p",71),e.EFF(63,"Salvage Amount"),e.k0s(),e.j41(64,"p",72),e.EFF(65),e.nI1(66,"currency"),e.k0s()()()()(),e.DNE(67,ke,4,2,"app-card",73),e.nrm(68,"app-chat-box",74),e.k0s()),2&i){const t=e.XpG();e.R7$(9),e.SpI("",t.survey.survey_number," "),e.R7$(5),e.JRh(t.survey.survey_type_sequence),e.R7$(6),e.JRh(e.i5U(21,15,t.survey.assign_date,"mediumDate")),e.R7$(6),e.JRh(t.survey.due_date?e.i5U(27,18,t.survey.due_date,"medium"):"N/A"),e.R7$(8),e.SpI("",t.survey.customer_name," "),e.R7$(5),e.SpI("",t.survey.customer_phone," "),e.R7$(2),e.JRh(t.survey.customer_email),e.R7$(5),e.Lme("",t.survey.customer_street," ",t.survey.state_name,""),e.R7$(7),e.SpI("",e.bMT(54,21,t.survey.zero_price)," "),e.R7$(6),e.SpI("",e.bMT(60,23,t.survey.market_value)," "),e.R7$(6),e.JRh(e.bMT(66,25,t.survey.salvage_amount)),e.R7$(2),e.Y8G("ngIf",t.survey.conclusion||t.survey.recommendation),e.R7$(),e.Y8G("modelName","insurance.survey")("recordId",t.survey.id)}}function je(i,n){1&i&&(e.j41(0,"span",93),e.EFF(1,"Radio"),e.k0s())}function Se(i,n){1&i&&(e.j41(0,"span",94),e.EFF(1,"AC"),e.k0s())}function we(i,n){1&i&&(e.j41(0,"span",95),e.EFF(1,"Roadside"),e.k0s())}function Ce(i,n){if(1&i&&(e.j41(0,"div",80)(1,"app-card",81)(2,"div",82)(3,"div",83)(4,"p",84),e.EFF(5,"Make & Model"),e.k0s(),e.j41(6,"p",63),e.EFF(7),e.k0s()(),e.j41(8,"div",83)(9,"p",84),e.EFF(10,"Plate Number"),e.k0s(),e.j41(11,"p",85),e.EFF(12),e.k0s()(),e.j41(13,"div",83)(14,"p",84),e.EFF(15,"Chassis Number"),e.k0s(),e.j41(16,"p",86),e.EFF(17),e.k0s()(),e.j41(18,"div",83)(19,"p",84),e.EFF(20,"Motor Number"),e.k0s(),e.j41(21,"p",86),e.EFF(22),e.k0s()(),e.j41(23,"div",83)(24,"p",84),e.EFF(25,"Year"),e.k0s(),e.j41(26,"p",63),e.EFF(27),e.k0s()(),e.j41(28,"div",83)(29,"p",84),e.EFF(30,"Color"),e.k0s(),e.j41(31,"p",63),e.EFF(32),e.k0s()()(),e.j41(33,"div",87),e.DNE(34,je,2,0,"span",88)(35,Se,2,0,"span",89)(36,we,2,0,"span",90),e.k0s()(),e.j41(37,"app-card",91)(38,"div",60)(39,"div")(40,"p",62),e.EFF(41,"Driver Name"),e.k0s(),e.j41(42,"p",63),e.EFF(43),e.k0s()(),e.j41(44,"div")(45,"p",62),e.EFF(46,"License"),e.k0s(),e.j41(47,"p",92),e.EFF(48),e.k0s(),e.j41(49,"p",67),e.EFF(50),e.k0s()(),e.j41(51,"div")(52,"p",62),e.EFF(53,"Date of Birth"),e.k0s(),e.j41(54,"p",92),e.EFF(55),e.k0s()()()()()),2&i){const t=e.XpG(2);e.R7$(7),e.Lme("",t.survey.risk_info.vehicle_make_name," - ",t.survey.risk_info.vehicle_model_name," "),e.R7$(5),e.SpI(" ",t.survey.risk_info.vehicle_plate_number||"N/A",""),e.R7$(5),e.JRh(t.survey.risk_info.vehicle_chassis_number),e.R7$(5),e.JRh(t.survey.risk_info.vehicle_motor_number),e.R7$(5),e.JRh(t.survey.risk_info.vehicle_manufacture_year),e.R7$(5),e.JRh(t.survey.risk_info.vehicle_color_name||"N/A"),e.R7$(2),e.Y8G("ngIf",t.survey.risk_info.vehicle_has_radio),e.R7$(),e.Y8G("ngIf",t.survey.risk_info.vehicle_has_conditioning),e.R7$(),e.Y8G("ngIf",t.survey.risk_info.vehicle_has_roadside),e.R7$(7),e.JRh(t.survey.risk_info.driver_name||"N/A"),e.R7$(5),e.JRh(t.survey.risk_info.driver_license_number||"N/A"),e.R7$(2),e.SpI("Expires: ",t.survey.risk_info.driver_license_expiry||"N/A",""),e.R7$(5),e.JRh(t.survey.risk_info.driver_date_of_birth||"N/A")}}function Ie(i,n){if(1&i&&(e.j41(0,"div",57),e.DNE(1,Ce,56,14,"div",79),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",t.survey.risk_info)}}function Re(i,n){if(1&i&&(e.j41(0,"p",109),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI('"',t.comment,'"')}}function Ee(i,n){if(1&i&&(e.j41(0,"div",110)(1,"span",111),e.EFF(2),e.k0s()()),2&i){const t=e.XpG().$implicit;e.R7$(2),e.SpI("",t.files.length," files")}}function Te(i,n){if(1&i&&(e.j41(0,"div",99)(1,"div",100)(2,"div",101),e.qSk(),e.j41(3,"svg",102),e.nrm(4,"path",103)(5,"polyline",6),e.k0s()(),e.joV(),e.j41(6,"div",104)(7,"p",105),e.EFF(8),e.k0s(),e.j41(9,"p",106),e.EFF(10),e.k0s()()(),e.DNE(11,Re,2,1,"p",107)(12,Ee,3,1,"div",108),e.k0s()),2&i){const t=n.$implicit;e.R7$(7),e.FS9("title",t.document_name),e.R7$(),e.JRh(t.document_name),e.R7$(2),e.JRh(t.document_code),e.R7$(),e.Y8G("ngIf",t.comment),e.R7$(),e.Y8G("ngIf",t.files&&t.files.length)}}function $e(i,n){if(1&i&&(e.j41(0,"div",96)(1,"div",97),e.DNE(2,Te,13,5,"div",98),e.k0s()()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("ngForOf",t.survey.survey_documents)}}function De(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",96)(1,"app-card",112)(2,"form",113),e.bIt("ngSubmit",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.submitAssessment())}),e.j41(3,"div")(4,"label",114),e.EFF(5,"Vehicle Condition"),e.k0s(),e.j41(6,"app-selection-modal",115),e.mxI("valueChange",function(r){e.eBV(t);const o=e.XpG();return e.DH7(o.assessmentForm.condition,r)||(o.assessmentForm.condition=r),e.Njj(r)}),e.k0s()(),e.j41(7,"div")(8,"label",114),e.EFF(9,"Estimated Value"),e.k0s(),e.j41(10,"input",116),e.mxI("ngModelChange",function(r){e.eBV(t);const o=e.XpG();return e.DH7(o.assessmentForm.estimatedValue,r)||(o.assessmentForm.estimatedValue=r),e.Njj(r)}),e.k0s()(),e.j41(11,"div")(12,"label",114),e.EFF(13,"Recommendations"),e.k0s(),e.j41(14,"textarea",117),e.mxI("ngModelChange",function(r){e.eBV(t);const o=e.XpG();return e.DH7(o.assessmentForm.recommendations,r)||(o.assessmentForm.recommendations=r),e.Njj(r)}),e.k0s()(),e.j41(15,"div")(16,"label",114),e.EFF(17,"Upload Photos"),e.k0s(),e.j41(18,"app-file-upload",118),e.bIt("filesSelected",function(r){e.eBV(t);const o=e.XpG();return e.Njj(o.onFilesSelected(r))}),e.k0s()(),e.j41(19,"div",119)(20,"app-button",120),e.EFF(21,"Submit Assessment"),e.k0s()()()()()}if(2&i){const t=e.XpG();e.R7$(6),e.Y8G("options",e.ziG(11,le,e.lJ4(7,ne),e.lJ4(8,oe),e.lJ4(9,ae),e.lJ4(10,de))),e.R50("value",t.assessmentForm.condition),e.Y8G("required",!0),e.R7$(4),e.R50("ngModel",t.assessmentForm.estimatedValue),e.R7$(4),e.R50("ngModel",t.assessmentForm.recommendations),e.R7$(4),e.Y8G("accept","image/*")("multiple",!0)}}function Ge(i,n){1&i&&(e.j41(0,"div",121),e.nrm(1,"app-loading-spinner",122),e.k0s()),2&i&&(e.R7$(),e.Y8G("loading",!0))}let Ve=(()=>{class i{setActiveTab(t){this.activeTab=t}constructor(t,s,r,o){this.route=t,this.router=s,this.surveyorService=r,this.notificationService=o,this.surveyId="",this.survey=null,this.loading=!0,this.assessmentForm={condition:"",estimatedValue:"",recommendations:"",photos:[]},this.activeTab="overview"}ngOnInit(){this.surveyId=this.route.snapshot.params.id,this.loadSurvey()}loadSurvey(){this.loading=!0,this.surveyorService.getSurveyDetails(this.surveyId).subscribe({next:t=>{this.survey=t.data||t,this.loading=!1},error:t=>{console.error("Error loading survey details:",t),this.notificationService.error("Failed to load survey details"),this.loading=!1}})}onFilesSelected(t){this.assessmentForm.photos=t}goBack(){this.router.navigate(["/dashboard/surveyor/pending"])}onAccept(){this.loading=!0,this.surveyorService.acceptSurvey(this.surveyId).subscribe({next:()=>{this.notificationService.success("Survey accepted successfully"),this.loadSurvey()},error:t=>{console.error("Error accepting survey:",t),this.notificationService.error("Failed to accept survey"),this.loading=!1}})}onSuspend(){this.loading=!0,this.surveyorService.suspendSurvey(this.surveyId).subscribe({next:()=>{this.notificationService.success("Survey suspended successfully"),this.loadSurvey()},error:t=>{console.error("Error suspending survey:",t),this.notificationService.error("Failed to suspend survey"),this.loading=!1}})}onReject(){confirm("Are you sure you want to reject this survey?")&&(this.loading=!0,this.surveyorService.rejectSurvey(this.surveyId).subscribe({next:()=>{this.notificationService.success("Survey rejected successfully"),this.router.navigate(["/dashboard/surveyor/pending"])},error:t=>{console.error("Error rejecting survey:",t),this.notificationService.error("Failed to reject survey"),this.loading=!1}}))}submitAssessment(){console.log("Submitting assessment:",this.assessmentForm),this.notificationService.success("Assessment submitted successfully!"),this.goBack()}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(u.nX),e.rXU(u.Ix),e.rXU(y.L),e.rXU(K.J))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-survey-details"]],decls:26,vars:12,consts:[["class","space-y-6",4,"ngIf"],[1,"border-b","border-gray-200","mb-6","animate-fadeIn",2,"animation-delay","100ms"],[1,"flex","gap-8","overflow-x-auto"],[1,"pb-4","px-2","text-sm","font-medium","capitalize","transition-all","relative","whitespace-nowrap","flex","items-center","gap-2",3,"click","ngClass"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14 2z"],["points","14 2 14 8 20 8"],["class","absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-blue-600 rounded-t-full",4,"ngIf"],["d","m18.8 13.9 1.1-1.1c.3-.3.3-.8 0-1.1l-6.8-6.8a1.5 1.5 0 0 0-2.1 0l-6.8 6.8c-.3.3-.3.8 0 1.1l1.1 1.1"],["d","m8.3 11.4 1.4-2.8 5.7 5.7-2.8 1.4"],["d","m11.1 8.6 2.8 1.4"],["d","m9.7 7.2 2.8 1.4"],["class","pb-4 px-2 text-sm font-medium capitalize transition-all relative whitespace-nowrap flex items-center gap-2",3,"ngClass","click",4,"ngIf"],[1,"space-y-8","min-h-[400px]"],["class","space-y-6 animate-fadeIn",4,"ngIf"],["class","animate-fadeIn",4,"ngIf"],["class","flex items-center justify-center h-96",4,"ngIf"],[1,"space-y-6"],[1,"mb-8","animate-fadeIn","relative","overflow-hidden","rounded-2xl","p-4","-m-4"],[1,"absolute","inset-0","pointer-events-none","z-0",2,"background-image","url('assets/img/backgrounds/survey-header.svg')","background-repeat","no-repeat","background-position","center","background-size","cover"],[1,"relative","z-10"],[1,"flex","items-center","gap-2","text-sm","text-gray-200","mb-4"],[1,"hover:text-white","transition-all","duration-300",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4"],["d","m9 18 6-6-6-6"],[1,"text-white","font-medium"],[1,"flex","flex-col","lg:flex-row","lg:items-center","justify-between","gap-4"],[1,"flex","items-start","gap-4"],[1,"w-14","h-14","bg-white/10","backdrop-blur-sm","rounded-xl","flex","items-center","justify-center","text-white","shadow-lg","border","border-white/20"],["xmlns","http://www.w3.org/2000/svg","width","28","height","28","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M16 13H8"],["d","M16 17H8"],["d","M10 9H8"],[1,"text-3xl","font-bold","text-white","mb-1"],[1,"text-lg","text-gray-200","font-medium","mb-2"],[1,"flex","flex-wrap","items-center","gap-3","text-sm","text-gray-200"],[1,"flex","items-center","gap-1","bg-white/20","px-2","py-0.5","rounded","text-xs","font-semibold","uppercase","text-white"],[1,"flex","items-center","gap-1"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x","2","y","7","width","20","height","14","rx","2","ry","2"],["d","M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[1,"flex","flex-wrap","items-center","gap-3"],[1,"px-4","py-2","rounded-full","text-sm","font-semibold","capitalize","flex","items-center","gap-2",3,"ngClass"],["variant","danger",3,"click",4,"ngIf"],["variant","secondary",3,"click",4,"ngIf"],["variant","primary",3,"click",4,"ngIf"],["variant","danger",3,"click"],["variant","secondary",3,"click"],["variant","primary",3,"click"],[1,"absolute","bottom-0","left-0","right-0","h-0.5","bg-gradient-to-r","from-blue-500","to-blue-600","rounded-t-full"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],[1,"space-y-6","animate-fadeIn"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["title","Survey Information"],[1,"space-y-4"],[1,"grid","grid-cols-2","gap-4"],[1,"text-xs","text-gray-500","dark:text-gray-400","uppercase"],[1,"font-semibold","text-gray-900","dark:text-white"],[1,"border-t","border-gray-100","dark:border-gray-700","py-2"],["title","Customer Information"],[1,"text-sm","font-medium","text-gray-900","dark:text-white"],[1,"text-xs","text-gray-500"],[1,"text-sm","text-gray-900","dark:text-white"],["title","Financials"],[1,"flex","justify-between","items-center"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"font-bold","text-gray-900","dark:text-white"],["title","Conclusion & Recommendations",4,"ngIf"],[3,"modelName","recordId"],["title","Conclusion & Recommendations"],[4,"ngIf"],[1,"text-sm","font-bold","text-gray-900","dark:text-white","mb-1","uppercase"],[1,"text-gray-600","dark:text-gray-400","bg-gray-50","dark:bg-gray-800","p-3","rounded-lg","text-sm"],["class","grid grid-cols-1 md:grid-cols-2 gap-6",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["title","Vehicle Information"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-6","text-sm"],[1,"space-y-1"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"font-mono","font-medium","bg-gray-100","dark:bg-gray-700","px-2","py-0.5","rounded","inline-block"],[1,"font-mono","text-gray-900","dark:text-white"],[1,"mt-4","pt-4","border-t","border-gray-100","dark:border-gray-700","flex","flex-wrap","gap-2"],["class","px-2 py-1 bg-green-100 text-green-800 rounded text-xs dark:bg-green-900 dark:text-green-200",4,"ngIf"],["class","px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs dark:bg-blue-900 dark:text-blue-200",4,"ngIf"],["class","px-2 py-1 bg-purple-100 text-purple-800 rounded text-xs dark:bg-purple-900 dark:text-purple-200",4,"ngIf"],["title","Driver Information"],[1,"font-medium","text-gray-900","dark:text-white"],[1,"px-2","py-1","bg-green-100","text-green-800","rounded","text-xs","dark:bg-green-900","dark:text-green-200"],[1,"px-2","py-1","bg-blue-100","text-blue-800","rounded","text-xs","dark:bg-blue-900","dark:text-blue-200"],[1,"px-2","py-1","bg-purple-100","text-purple-800","rounded","text-xs","dark:bg-purple-900","dark:text-purple-200"],[1,"animate-fadeIn"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4"],["class","bg-white dark:bg-gray-800 p-4 border border-gray-100 dark:border-gray-700 rounded-xl hover:shadow-md transition",4,"ngFor","ngForOf"],[1,"bg-white","dark:bg-gray-800","p-4","border","border-gray-100","dark:border-gray-700","rounded-xl","hover:shadow-md","transition"],[1,"flex","items-start","gap-3","mb-2"],[1,"p-2","bg-blue-100","text-blue-600","rounded-lg","dark:bg-blue-900","dark:text-blue-300"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],[1,"flex-1","overflow-hidden"],[1,"font-medium","text-gray-900","dark:text-white","truncate",3,"title"],[1,"text-xs","text-gray-500","truncate"],["class","text-xs text-gray-500 italic mt-2 line-clamp-2",4,"ngIf"],["class","flex gap-2 mt-3",4,"ngIf"],[1,"text-xs","text-gray-500","italic","mt-2","line-clamp-2"],[1,"flex","gap-2","mt-3"],[1,"text-xs","text-blue-600","bg-blue-50","px-2","py-1","rounded","dark:bg-blue-900/30","dark:text-blue-300"],["title","Submit Assessment"],[1,"space-y-6",3,"ngSubmit"],[1,"block","text-sm","font-medium","text-gray-700","dark:text-gray-300","mb-2"],["label","Vehicle Condition","title","Select Vehicle Condition","subtitle","Choose the condition of the vehicle","placeholder","Select condition","valueKey","value","displayKey","label",3,"valueChange","options","value","required"],["type","number","name","estimatedValue","required","","placeholder","0.00",1,"w-full","px-4","py-3","border","border-gray-300","dark:border-gray-600","rounded-lg","focus:ring-2","focus:ring-primary","focus:border-transparent","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],["name","recommendations","required","","rows","5","placeholder","Enter your recommendations...",1,"w-full","px-4","py-3","border","border-gray-300","dark:border-gray-600","rounded-lg","focus:ring-2","focus:ring-primary","focus:border-transparent","dark:bg-gray-700","dark:text-white",3,"ngModelChange","ngModel"],[3,"filesSelected","accept","multiple"],[1,"flex","justify-end"],["type","submit","variant","primary"],[1,"flex","items-center","justify-center","h-96"],["message","Loading survey details...",3,"loading"]],template:function(s,r){1&s&&(e.j41(0,"app-dashboard-layout"),e.DNE(1,ge,47,19,"div",0),e.j41(2,"div",1)(3,"nav",2)(4,"button",3),e.bIt("click",function(){return r.setActiveTab("overview")}),e.qSk(),e.j41(5,"svg",4),e.nrm(6,"path",5)(7,"polyline",6),e.k0s(),e.EFF(8," Overview "),e.DNE(9,ve,1,0,"div",7),e.k0s(),e.joV(),e.j41(10,"button",3),e.bIt("click",function(){return r.setActiveTab("risk")}),e.qSk(),e.j41(11,"svg",4),e.nrm(12,"path",8)(13,"path",9)(14,"path",10)(15,"path",11),e.k0s(),e.EFF(16," Risk Details "),e.DNE(17,me,1,0,"div",7),e.k0s(),e.DNE(18,he,6,2,"button",12)(19,_e,6,2,"button",12),e.k0s()(),e.joV(),e.j41(20,"div",13),e.DNE(21,Fe,69,27,"div",14)(22,Ie,2,1,"div",14)(23,$e,3,1,"div",15)(24,De,22,16,"div",15),e.k0s(),e.DNE(25,Ge,2,1,"div",16),e.k0s()),2&s&&(e.R7$(),e.Y8G("ngIf",!r.loading&&r.survey),e.R7$(3),e.Y8G("ngClass","overview"===r.activeTab?"text-primary":"text-gray-500 dark:text-gray-400 hover:text-gray-700"),e.R7$(5),e.Y8G("ngIf","overview"===r.activeTab),e.R7$(),e.Y8G("ngClass","risk"===r.activeTab?"text-primary":"text-gray-500 dark:text-gray-400 hover:text-gray-700"),e.R7$(7),e.Y8G("ngIf","risk"===r.activeTab),e.R7$(),e.Y8G("ngIf",r.survey.survey_documents&&r.survey.survey_documents.length),e.R7$(),e.Y8G("ngIf","completed"!==r.survey.state),e.R7$(2),e.Y8G("ngIf","overview"===r.activeTab),e.R7$(),e.Y8G("ngIf","risk"===r.activeTab),e.R7$(),e.Y8G("ngIf","documents"===r.activeTab),e.R7$(),e.Y8G("ngIf","actions"===r.activeTab),e.R7$(),e.Y8G("ngIf",r.loading))},dependencies:[l.YU,l.Sq,l.bT,p.qT,p.me,p.Q0,p.BC,p.cb,p.YS,p.vS,p.cV,v.w,Z.Q,k.i,ee.N,te.P,re.j,ie.f,l.oe,l.vh]})}}return i})(),Ne=(()=>{class i{constructor(t){this.router=t,this.tableConfig={columns:[],data:[],loading:!0,pageSize:10,showSearch:!0,showExport:!0,searchPlaceholder:"Search claims..."},this.setupColumns()}ngOnInit(){this.loadClaims()}setupColumns(){this.tableConfig.columns=[{key:"claim_number",label:"Claim #",sortable:!0},{key:"customer_name",label:"Customer",sortable:!0},{key:"policy_number",label:"Policy",sortable:!0},{key:"claim_type",label:"Type",sortable:!0},{key:"assigned_date",label:"Assigned",sortable:!0},{key:"priority",label:"Priority",sortable:!0},{key:"status",label:"Status",sortable:!0}]}loadClaims(){this.tableConfig.data=[{id:1,claim_number:"CLM-2024-001",customer_name:"John Doe",policy_number:"POL-2024-001",claim_type:"Accident",assigned_date:"2024-01-15",priority:"High",status:"Pending"},{id:2,claim_number:"CLM-2024-002",customer_name:"Jane Smith",policy_number:"POL-2024-002",claim_type:"Theft",assigned_date:"2024-01-16",priority:"Medium",status:"In Progress"}],this.tableConfig.loading=!1}onRowClick(t){this.router.navigate(["/dashboard/surveyor/surveys",t.id])}onExport(){console.log("Exporting claims...")}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(u.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-surveyor-claims"]],decls:8,vars:1,consts:[[1,"space-y-6"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white"],[1,"text-gray-600","dark:text-gray-400","mt-1"],[3,"rowClick","exportData","config"]],template:function(s,r){1&s&&(e.j41(0,"app-dashboard-layout")(1,"div",0)(2,"div")(3,"h1",1),e.EFF(4,"Claims Assessment"),e.k0s(),e.j41(5,"p",2),e.EFF(6,"Manage claim surveys and assessments"),e.k0s()(),e.j41(7,"app-data-table",3),e.bIt("rowClick",function(a){return r.onRowClick(a)})("exportData",function(){return r.onExport()}),e.k0s()()()),2&s&&(e.R7$(7),e.Y8G("config",r.tableConfig))},dependencies:[v.w,F.u]})}}return i})();var j=d(217);function Me(i,n){1&i&&(e.j41(0,"div",7),e.nrm(1,"div",8),e.j41(2,"p",9),e.EFF(3,"Loading stages..."),e.k0s()())}function Pe(i,n){if(1&i){const t=e.RV6();e.j41(0,"div",10)(1,"div",11),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.handleStageClick("pending"))}),e.j41(2,"div",12)(3,"div",13),e.qSk(),e.j41(4,"svg",14),e.nrm(5,"path",15),e.k0s()(),e.j41(6,"svg",16),e.nrm(7,"path",17),e.k0s()(),e.joV(),e.j41(8,"h3",18),e.EFF(9,"Pending Surveys"),e.k0s(),e.j41(10,"p",19),e.EFF(11,"Surveys that need acceptance or rejection"),e.k0s(),e.j41(12,"p",20),e.EFF(13),e.k0s()(),e.j41(14,"div",11),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.handleStageClick("suspended"))}),e.j41(15,"div",12)(16,"div",21),e.qSk(),e.j41(17,"svg",22),e.nrm(18,"circle",23)(19,"line",24)(20,"line",25),e.k0s()(),e.j41(21,"svg",16),e.nrm(22,"path",17),e.k0s()(),e.joV(),e.j41(23,"h3",18),e.EFF(24,"Suspended Surveys"),e.k0s(),e.j41(25,"p",19),e.EFF(26,"Surveys suspended for another time"),e.k0s(),e.j41(27,"p",20),e.EFF(28),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(13),e.JRh(t.currentStats.pending),e.R7$(15),e.JRh(t.currentStats.suspended)}}let Ae=(()=>{class i{constructor(t,s,r,o){this.router=t,this.route=s,this.surveyorService=r,this.authService=o,this.loading=!0,this.surveyType="issuance",this.stats={issuance:{pending:0,suspended:0},claim:{pending:0,suspended:0}},this.user=null}ngOnInit(){this.route.queryParams.subscribe(t=>{t.type&&(this.surveyType=t.type,this.fetchStats())}),this.authService.currentUser.subscribe(t=>{this.user=t,t&&this.fetchStats()})}fetchStats(){this.loading=!0,("issuance"===this.surveyType?this.surveyorService.listSurveys.bind(this.surveyorService):this.surveyorService.listClaims.bind(this.surveyorService))({limit:100,identification_codes:this.user?.identification_code?JSON.stringify([this.user.identification_code]):"[]"}).subscribe({next:o=>{let a=[];o.surveys?a=o.surveys:o.data&&o.data.surveys?a=o.data.surveys:o.data&&o.data.result&&o.data.result.data?a=o.data.result.data:o.data&&o.data.data?a=o.data.data:o.data&&Array.isArray(o.data)?a=o.data:Array.isArray(o)&&(a=o);const g={pending:0,suspended:0};a.forEach(b=>{const c=(b.state||b.status||"").toLowerCase();c.includes("pending")||c.includes("surveyor")||"surveyor assigned"===c?g.pending++:c.includes("suspend")&&g.suspended++}),this.stats[this.surveyType]=g,this.loading=!1},error:o=>{console.error("Error fetching survey stats:",o),this.loading=!1}})}handleStageClick(t){let s="/dashboard/surveyor/pending",r={type:this.surveyType};"suspended"===t?s="/dashboard/surveyor/suspended":"pending"===t?s="/dashboard/surveyor/pending":r.status=t,this.router.navigate([s],{queryParams:r})}get currentStats(){return this.stats[this.surveyType]}get title(){return"issuance"===this.surveyType?"Issuance Survey Stages":"Claim Survey Stages"}get description(){return"issuance"===this.surveyType?"Track pre-risk inspections by stage":"Track claim inspections by stage"}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(u.Ix),e.rXU(u.nX),e.rXU(y.L),e.rXU(x.u))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-survey-stages"]],standalone:!0,features:[e.aNF],decls:12,vars:4,consts:[[1,"mb-8"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-bold","text-gray-900","dark:text-white","mb-2"],[1,"text-gray-600","dark:text-gray-400"],[1,"px-4","py-2","bg-white","dark:bg-gray-800","border","border-gray-200","dark:border-gray-700","rounded-lg","text-sm","font-medium","text-gray-600","dark:text-gray-300","hover:bg-gray-50","dark:hover:bg-gray-700","shadow-sm","transition-colors",3,"click"],["class","text-center py-12",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 gap-6",4,"ngIf"],[1,"text-center","py-12"],[1,"inline-block","animate-spin","rounded-full","h-8","w-8","border-b-2","border-primary"],[1,"mt-4","text-gray-600","dark:text-gray-400"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"group","relative","overflow-hidden","bg-white","dark:bg-gray-800","p-6","rounded-xl","border","border-gray-200","dark:border-gray-700","hover:border-primary/50","dark:hover:border-primary/50","hover:shadow-lg","transition-all","duration-300","cursor-pointer",3,"click"],[1,"flex","items-center","justify-between","mb-4"],[1,"p-3","rounded-lg","bg-yellow-100","dark:bg-gray-700"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-gray-400","group-hover:text-primary","group-hover:translate-x-1","transition-all","duration-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M14 5l7 7m0 0l-7 7m7-7H3"],[1,"text-lg","font-bold","text-gray-900","dark:text-white","mb-1"],[1,"text-sm","text-gray-500","dark:text-gray-400","mb-4"],[1,"text-3xl","font-bold","text-primary"],[1,"p-3","rounded-lg","bg-red-100","dark:bg-gray-700"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","text-red-600"],["cx","12","cy","12","r","10"],["x1","10","x2","10","y1","15","y2","9"],["x1","14","x2","14","y1","15","y2","9"]],template:function(s,r){1&s&&(e.j41(0,"app-dashboard-layout")(1,"div",0)(2,"div",1)(3,"div")(4,"h1",2),e.EFF(5),e.k0s(),e.j41(6,"p",3),e.EFF(7),e.k0s()(),e.j41(8,"button",4),e.bIt("click",function(){return r.router.navigate(["/dashboard/surveyor"])}),e.EFF(9," Back to Overview "),e.k0s()()(),e.DNE(10,Me,4,0,"div",5)(11,Pe,29,2,"div",6),e.k0s()),2&s&&(e.R7$(5),e.JRh(r.title),e.R7$(2),e.JRh(r.description),e.R7$(3),e.Y8G("ngIf",r.loading),e.R7$(),e.Y8G("ngIf",!r.loading))},dependencies:[l.MD,l.bT,j.G,v.w]})}}return i})();var Xe=d(1855),Ye=d(2780);const Be=[{path:"",component:C},{path:"stages",component:Ae},{path:"pending",component:_},{path:"suspended",component:_},{path:"in-progress",component:_},{path:"surveys/:id",component:Ve},{path:"claims",component:Ne},{path:"profile",component:Xe.n},{path:"settings",component:Ye.b}];let Le=(()=>{class i{static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[u.iI.forChild(Be),u.iI]})}}return i})(),ze=(()=>{class i{static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[l.MD,p.YN,Le,j.G]})}}return i})()}}]);